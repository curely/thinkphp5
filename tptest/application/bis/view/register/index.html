<!DOCTYPE html>
<html>
    <head>
        {include file="public/header" /}
    </head>
    <body>
        <div class="x-nav">
            <span class="layui-breadcrumb">
              <a>商户入驻申请</a>
            </span>
            <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right"  href="javascript:location.replace(location.href);" title="刷新"><i class="layui-icon" style="line-height:30px">ဂ</i></a>
        </div>
        <div class="x-body">
            <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" style="margin: 0px 100px;">
              <ul class="layui-tab-title">
                <li class="layui-this">基本信息</li>
              </ul>
              <div class="layui-tab-content" >
                <div class="layui-tab-item layui-show">
                    <form class="layui-form layui-form-pane" method="post" action="{:url('Register/add')}">
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                <span class='x-red'>*</span>商户名称
                            </label>
                            <div class="layui-input-block">
                                <input type="text" name="name" autocomplete="off" placeholder="商户名称"
                                class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label" >所属城市</label>
                            <div class="layui-input-inline" style="width:120px;text-align: left">
                                <select lay-filter="cityId" name="city_id" >
                                    <option value="0">--请选择--</option>
                                    {volist name="city" id="cio"}
                                    <option value="{$cio.id}">{$cio.name}</option>
                                    {/volist}
                                </select>
                            </div>
                            <div class="layui-input-inline" style="width:120px">
                                <select name="se_city_id"  class="childId">
                                    <option value="0">--请选择--</option>
                                </select>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="link" class="layui-form-label">
                                <span class="x-red">*</span>缩略图
                            </label>
                            <div class="layui-input-inline">
                              <div class="site-demo-upbar">
                                <input type="file" name="file" multiple="true" id="file_upload">
                              </div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label  class="layui-form-label">缩略图
                            </label>
                            <img id="file_image_up" src="" width="100" height="100" style="display:none">
                            <input id="file_image_inpu" type="hidden" name="logo" multiple="true" value="">
                        </div>
                        <div class="layui-form-item">
                            <label for="link" class="layui-form-label">
                                <span class="x-red">*</span>营业执照
                            </label>
                            <div class="layui-input-inline">
                              <div class="site-demo-upbar">
                                <input type="file" name="file" multiple="true" id="licence_upload">
                              </div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label  class="layui-form-label">营业执照
                            </label>
                            <img id="licence_image_up" src="" width="100" height="100" style="display:none">
                            <input id="licence_image_inpu" type="hidden" name="licence_logo" multiple="true" value="">
                        </div>
                        <div class="layui-form-item">
                            <label for="L_title" class="layui-form-label">
                                商户介绍
                            </label>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <div class="layui-input-block">
                                <textarea id="L_content" name="description" 
                                placeholder="请输入内容" class="layui-textarea fly-editor" style="height: 260px;"></textarea>
                            </div>
                            <label for="L_content" class="layui-form-label" style="top: -2px;">
                                描述
                            </label>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                <span class='x-red'>*</span>银行账号
                            </label>
                            <div class="layui-input-block">
                                <input type="text" name="bank_info" autocomplete="off" placeholder="银行账号"
                                class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                <span class='x-red'>*</span>开户行名称
                            </label>
                            <div class="layui-input-block">
                                <input type="text" name="bank_name" autocomplete="off" placeholder="户行名称"
                                class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                <span class='x-red'>*</span>开户行姓名
                            </label>
                            <div class="layui-input-block">
                                <input type="text" name="bank_user" autocomplete="off" placeholder="开户行姓名"
                                class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                <span class='x-red'>*</span>法人
                            </label>
                            <div class="layui-input-block">
                                <input type="text" name="faren" autocomplete="off" placeholder="法人姓名"
                                class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                <span class='x-red'>*</span>法人电话
                            </label>
                            <div class="layui-input-block">
                                <input type="text" name="faren_tel" autocomplete="off" placeholder="11位电话号码"
                                class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                <span class='x-red'>*</span>邮箱
                            </label>
                            <div class="layui-input-block">
                                <input type="text" name="email" autocomplete="off" placeholder="42353@163.com"
                                class="layui-input">
                            </div>
                        </div>

                        <ul class="layui-tab-title">
                            <li class="layui-this">总店信息</li>
                        </ul>
                        <div class="layui-tab-item layui-show">
                            <div class="layui-form-item">
                                <label class="layui-form-label">
                                    <span class='x-red'>*</span>电话
                                </label>
                                <div class="layui-input-block">
                                    <input type="text" name="tel" autocomplete="off" placeholder="电话"
                                    class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">
                                    <span class='x-red'>*</span>联系人
                                </label>
                                <div class="layui-input-block">
                                    <input type="text" name="contact" autocomplete="off" placeholder="联系人"
                                    class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >所属分类</label>
                                <div class="layui-input-inline" style="width:120px;text-align: left">
                                    <select lay-filter="cateId" name="category_id" >
                                        <option value="0">--请选择--</option>
                                        {volist name="category" id="cate"}
                                        <option value="{$cate.id}">{$cate.name}</option>
                                        {/volist}
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">
                                    <span class='x-red'>*</span>所属子类
                                </label>
                                <div class="layui-input-block cate-input">

                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">
                                    <span class='x-red'>*</span>商户地址
                                </label>
                                <div class="layui-input-block">
                                    <input type="text" id="address" name="address" " autocomplete="off" placeholder="请填写详细地址：如江西省南昌市青山湖区高新南大道888号"
                                    class="layui-input"><span style="float: right;width: 50px;height: 30px;line-height: 30px;text-align: center;background: #e6e6e6;border-radius: 5px;color: #666;cursor: pointer;margin-top:-35px;" onclick="label(this)">标注</span>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">
                                    <span class='x-red'>*</span>营业时间
                                </label>
                                <div class="layui-input-block">
                                    <input type="text" name="open_time" autocomplete="off" placeholder="营业时间"
                                    class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label for="L_title" class="layui-form-label">
                                    门店介绍
                                </label>
                            </div>
                            <div class="layui-form-item layui-form-text">
                                <div class="layui-input-block">
                                    <textarea id="L_content1" name="content" 
                                    placeholder="请输入内容" class="layui-textarea fly-editor" style="height: 260px;"></textarea>
                                </div>
                                <label for="L_content1" class="layui-form-label" style="top: -2px;">
                                    描述
                                </label>
                            </div>
                        </div>

                        <ul class="layui-tab-title">
                            <li class="layui-this">账号信息</li>
                        </ul>
                        <div class="layui-tab-item layui-show">
                            <div class="layui-form-item">
                                <label class="layui-form-label">
                                    <span class='x-red'>*</span>用户名
                                </label>
                                <div class="layui-input-block">
                                    <input type="text" id="username" name="username" autocomplete="off" placeholder="用户名"
                                    class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">
                                    <span class='x-red'>*</span>密码
                                </label>
                                <div class="layui-input-block">
                                    <input type="password" name="password" autocomplete="off" placeholder="密码"
                                    class="layui-input">
                                </div>
                            </div>
                        </div>

                        <div class="layui-form-item">
                            <button class="layui-btn" type="submit" lay-submit="" lay-filter="*">
                                保存
                            </button>
                        </div>
                    </form>
                </div>                
              </div>
            </div> 
        </div>
        {include file="public/footer" /}
        <script>
            // layui.use(['element','layer','form'], function(){
            //     $ = layui.jquery;//jquery
            //   lement = layui.element();//面包导航
            //   layer = layui.layer;//弹出层
            //   form = layui.form()

            //  //监听提交
            //   form.on('submit(*)', function(data){
            //     console.log(data);
            //     //发异步，把数据提交给php
            //     layer.alert("保存成功", {icon: 6});
            //     return false;
            //   });

            //   })
                
            // function label(){
                
            //     getAddress = $("input[name='address']").val();

            //     //发送ajax
            //     $.post("{:url('Register/getMap')}",{address:getAddress},function(res){
            //        layer.alert(1);
            //     },"json");
            // }
        </script>
        <script>
            layui.use(['form','layer','layedit'], function(){
                $ = layui.jquery;
              var form = layui.form()
              ,layer = layui.layer
              ,layedit = layui.layedit;


                layedit.set({
                  uploadImage: {
                    url: "./upimg.json" //接口url
                    ,type: 'post' //默认post
                  }
                })


            $("#username").blur(function(){
                getName = $(this).val();
                $.post("{:url('Register/Info')}",{name:getName},function(res){
                    if(res.code == 0){
                        layer.alert(res.msg);
                    }
                });
                
            });

            //创建一个编辑器
            editIndex = layedit.build('L_content');

            editIndex = layedit.build('L_content1');
            
              

              //监听提交
              form.on('submit(add)', function(data){
                console.log(data);
                //发异步，把数据提交给php
                layer.alert("增加成功", {icon: 6},function () {
                    // 获得frame索引
                    var index = parent.layer.getFrameIndex(window.name);
                    //关闭当前frame
                    parent.layer.close(index);
                });
                return false;
              });
              
              
            });
        </script>
        <script>
        layui.use(['form','layer','upload'], function(){
            $ = layui.jquery;
          var form = layui.form()
          ,layer = layui.layer;


          //图片上传接口
          layui.upload({
            url: './upload.json' //上传接口
            ,success: function(res){ //上传成功后的回调
                console.log(res);
              $('#LAY_demo_upload').attr('src',res.url);
            }
          });
        

          //监听提交
          form.on('submit(add)', function(data){
            console.log(data);
            //发异步，把数据提交给php
            layer.alert("增加成功", {icon: 6},function () {
                // 获得frame索引
                var index = parent.layer.getFrameIndex(window.name);
                //关闭当前frame
                parent.layer.close(index);
            });
            return false;
          });

        });

        var SCOPE = {
            "city_url" : "{:url('api/city/getChildCitys')}",
            "cate_url" : "{:url('api/Category/getChildCate')}",
            "upload_swf" : "__STATIC__/uploadify/uploadify.swf",
            "image_upload" : "{:url('api/Image/upload')}",
        };
        </script>
            <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?b393d153aeb26b46e9431fabaf0f6190";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script>
    </body>
</html>